---
title: Squashing git commits
date: '2022-03-29'
views: 0
---
[{"type":"heading_one","children":[{"text":"Inductivist practices are dangerous"}]},{"type":"paragraph","children":[{"text":"I've squashed commits a bunch of times - **never** ran into any issues. However, I recently learned that squashing *older* commits into *newer* ones can lead to permanent losses. **Especially** if they were never pushed.  The experience I had in squashing commits did not safeguard me from shooting myself in the foot."}]},{"type":"paragraph","children":[{"text":""}]},{"type":"heading_two","children":[{"text":"Why squash in the first place?"}]},{"type":"paragraph","children":[{"text":"I'll quote "},{"type":"link","url":"https://gitbetter.substack.com/p/how-to-squash-git-commits","children":[{"text":"Srebalaji Thirumalai"}]},{"text":":"}]},{"type":"block_quote","children":[{"text":"Git squash is a technique that helps you to take a series of commits and condense it to a few commits. "}]},{"type":"block_quote","children":[{"text":"For example, assume that you have a series of n commits. By squashing you can make all the n-commits to a single commit. "}]},{"type":"block_quote","children":[{"text":"Squashing is mainly used to condense a large number of commits to make it to a small number of meaningful commits. So that we can make the git history clearer."}]},{"type":"heading_two","children":[{"text":"What was I thinking?"}]},{"type":"paragraph","children":[{"text":"I was ready to wrap a feature branch up on this blog, so I proceeded to check the git log before squashing the commits to a single one:"}]},{"type":"paragraph","children":[{"text":"`git log --oneline`"}]},{"type":"paragraph","children":[{"text":"  `dfdcdc8 (HEAD -> feature) #5`"}]},{"type":"paragraph","children":[{"text":"  `a9dd039 #4`"}]},{"type":"paragraph","children":[{"text":"  `b33468a #3`"}]},{"type":"paragraph","children":[{"text":"  `d411e26 #2`"}]},{"type":"paragraph","children":[{"text":"  `d4d49a2 #1`"}]},{"type":"paragraph","children":[{"text":"  `712c4ce (master) base`"}]},{"type":"paragraph","children":[{"text":"Seeing the five commits I made to the feature branch, I proceeded to interactively rebase with: `git rebase HEAD~5 -i`. Jusqu'ici tout va bien."}]},{"type":"paragraph","children":[{"text":"I then squashed all of the commits except the last one, which I picked:"}]},{"type":"paragraph","children":[{"text":"`s d4d49a2 #1`"}]},{"type":"paragraph","children":[{"text":"`s d411e26 #2`"}]},{"type":"paragraph","children":[{"text":"`s b33468a #3`"}]},{"type":"paragraph","children":[{"text":"`s a9dd039 #4`"}]},{"type":"paragraph","children":[{"text":"`pick dfdcdc8 #5`"}]},{"type":"paragraph","children":[{"text":""}]},{"type":"heading_two","children":[{"text":"Thinking twice about error messages: overrated"}]},{"type":"paragraph","children":[{"text":"This is where I got the following message: `error: cannot 'squash' without a previous commit. You can fix this with 'git rebase --edit-todo' and then run 'git rebase --continue'.`. "}]},{"type":"paragraph","children":[{"text":"Needless to say, I didn't give it much thought, so I proceeded to mindlessly troubleshoot it with the suggestions. After throwing the `--continue` and  `--todo-edit` options at rebase, I was starting to feel like I didn't know what I was doing. *Why is rebasing being such a pain?*, I wondered, as I proceeded without considering `--abort`ing the process and starting over. This is a great reminder that is important to read the information provided by git (via `--help`, error messages, or the interactive prompt when using `-i`), since it will probably have the answer to the problem you are looking for."}]},{"type":"paragraph","children":[{"text":""}]},{"type":"heading_two","children":[{"text":"git rebase -i gives fair warning"}]},{"type":"paragraph","children":[{"text":"Looking back, I probably ran `git rebase --todo-edit`, picked the first commit, and `--continue`d to seal the deal. I assume that this is equivalent to running the first interactive rebase command above and deleting each line, leaving a single line that `pick`s the first commit (and deletes the rest). "}]},{"type":"paragraph","children":[{"text":"After all, the interactive rebase prompt *does* mention the following: `If you remove a line here THAT COMMIT WILL BE LOST.`"}]}]
